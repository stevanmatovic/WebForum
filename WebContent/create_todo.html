<!DOCTYPE html>
<html>
<head>
<title>Form to create a new resource</title>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript">
  var rootURL = "http://localhost:8080/rs.ftn.jersey.webshop/rest/proizvodi/add";
  var rootURL2 = "http://localhost:8080/rs.ftn.jersey.webshop/rest/proizvodi/getJustProducts";

  $(document).on('submit', '.forma', function(e) {
	  e.preventDefault();
	  console.log("add product");
	  var data = $('#forma').serialize();
	  //alert(data);
	  alert(formToJSON())
	  $.ajax({
	        type: 'POST',
	        url: rootURL,
	        contentType: 'application/json',
	        dataType: "json",
	        data:formToJSON(),
	        success: function (data) {
	            alert(data);
	        },
	        error: function(XMLHttpRequest, textStatus, errorThrown) {
	            alert("AJAX ERROR: " + errorThrown);
	        }
	    });
	});
  
  $(document).on('submit', '.for2ma', function(e) {
	  e.preventDefault();
	  console.log("add product");
	  $.ajax({
	        type: 'GET',
	        url: rootURL2,
	        dataType: "json",
	        success: function (data) {
	            alert(data);
	        },
	        error: function(XMLHttpRequest, textStatus, errorThrown) {
	            alert("AJAX ERROR: " + errorThrown);
	        }
	    });
	});
  
//Helper function to serialize all the form fields into a JSON string
  function formToJSON() {
      return JSON.stringify({
          "id": $('#id').val(),
          "count": $('#count').val(),
          });
  }
</script>

</head>
<body>
	<form class="forma" id="forma"
		action="../rs.ftn.jersey.webshop/rest/proizvodi/add" method="POST">
		<label for="id">ID</label> <input name="id" id="id" /> <br /> 
		Description: <input name="count" id="count"> <br /> 
		<input type="submit" value="Submit" />
	</form>
</body>
</html>
